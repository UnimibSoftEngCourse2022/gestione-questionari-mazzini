{{ define "ModalClosedQuestion"}}

<form
  class="p-4 md:p-5"
  data-modal-hide="select-modal"
  data-modal-toggle="select-modal"
  hx-post="/form/create/closed-question"
  hx-target="#questions"
  hx-swap="afterbegin"
  id="modal-body"
>
  <div class="grid gap-4 mb-4 grid-cols-2">
    <!-- TEXT -->
    <div class="col-span-2">
      <label
        for="questionText"
        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >text</label
      >
      <textarea
        id="questionText"
        name="questionText"
        rows="2"
        class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        placeholder="Write the text of the questions"
      ></textarea>
    </div>
    <!-- Category -->
    <div class="col-span-1 sm:col-span-2">
      <label
        for="questionCategory"
        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >Category</label
      >
      <select
        id="questionCategory"
        name="questionCategory"
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
      >
        <option selected="">Select category</option>
        <option value="TV">TV/Monitors</option>
        <option value="PC">PC</option>
        <option value="GA">Gaming/Console</option>
        <option value="PH">Phones</option>
      </select>
    </div>

    <!-- Answer -->
    <div id="closedQuestionFields" class="col-span-2">
      <div
        class="flex items-center justify-between mb-6 py-3 border-b rounded-t dark:border-gray-600"
      >
        <h4 class="text-lg font-semibold text-gray-900 dark:text-white">
          Multiple Choice
        </h4>
        <button
          type="button"
          class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
          onclick="addAnswer()"
        >
          <svg
            class="w-6 h-6 text-gray-800 dark:text-white"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
            />
          </svg>
          <span class="sr-only">add answer</span>
        </button>
      </div>

      <!-- Answer List -->
      <div id="answersList">
        <div class="relative z-0 w-full mb-5 group flex items-center">
          <input
            disabled
            id="inline-disabled-checkbox"
            type="checkbox"
            value=""
            class="w-4 h-4 mr-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
          />
          <input
            type="text"
            id="small-input"
            name="answer"
            class="block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
          />
          <!-- Remove button -->
          <button
            onclick="removeAnswer(this)"
            class="ml-3 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 remove-btn"
          >
            Remove
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Buttons -->
  <div class="flex items-center justify-between">
    <button
      hx-get="/form/create/prevStep"
      hx-trigger="click"
      hx-target="#modal-body"
      hx-swap="outerHTML"
      type="button"
      class="col-span-1 text-white bg-blue-700 hover:bg-blue-800 rounded-lg text-sm px-5 py-2.5"
    >
      prev step
    </button>
    <button
      data-modal-toggle="select-modal"
      type="submit"
      class="col-span-1 text-white bg-blue-700 hover:bg-blue-800 rounded-lg text-sm px-5 py-2.5"
    >
      Add Question
    </button>
  </div>
</form>

<!-- Template for new answer -->
<template id="answerTemplate">
  <div class="relative z-0 w-full mb-5 group flex items-center">
    <input
      disabled
      id="inline-disabled-checkbox"
      type="checkbox"
      value=""
      class="w-4 h-4 mr-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
    />
    <input
      type="text"
      id="small-input"
      name="answer"
      class="block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
    />
    <!-- Remove button -->
    <button
      onclick="removeAnswer(this)"
      class="ml-3 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"
    >
      Remove
    </button>
  </div>
</template>

<script>
  function addAnswer() {
    const answersList = document.getElementById("answersList");
    if (answersList.children.length < 5) {
      const template = document
        .getElementById("answerTemplate")
        .content.cloneNode(true);
      answersList.appendChild(template);
    }
  }

  function removeAnswer(button) {
    const answerDiv = button.parentElement;
    answerDiv.remove();
  }

  // function updateRemoveButtons() {
  //   const removeButtons = document.querySelectorAll(".remove-btn");
  //   console.log(removeButtons.length);
  //   if (removeButtons.length === 1) {
  //     removeButtons[0].disabled = true;
  //   } else {
  //     removeButtons.forEach((button) => (button.disabled = false));
  //   }
  // }
</script>

{{ end }}
